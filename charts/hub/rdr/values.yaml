---
global:
  clusterDomain: cluster.example.com

# Edge GitOps VMs deployment (script and helm chart)
edgeGitopsVms:
  chartVersion: "0.2.10"

submariner:
  instanceType: c5d.large
  ipsecNatPort: 4500
  NATTEnable: true
  cableDriver: libreswan

# Minimal overrides for cluster names, versions, regions (e.g. overrides/values-cluster-names.yaml).
# Merge override file FIRST so full regionalDR stays here and only clusterOverrides are applied.
# clusterOverrides:
#   primary:
#     name: ocp-primary
#     version: 4.18.7
#     install_config:
#       metadata:
#         name: ocp-primary
#       platform:
#         aws:
#           region: us-west-1
#   secondary:
#     name: ocp-secondary
#     ...

# DRPlacementControl (gitops-vm-protection) - override in values-cluster-names or values
drpc:
  name: gitops-vm-protection
  namespace: openshift-dr-ops
  drPolicyRef:
    name: 2m-vm
  kubeObjectProtection:
    captureInterval: 2m0s
    kubeObjectSelector:
      matchExpressions:
        - key: drprotection
          operator: In
          values:
            - "true"
  placementRef:
    name: gitops-vm-protection-placement-1
    namespace: openshift-dr-ops
  protectedNamespaces:
    - gitops-vms
  pvcSelector:
    matchExpressions:
      - key: app.kubernetes.io/component
        operator: In
        values:
          - storage
  preferredCluster: ocp-primary  # default; override in values-cluster-names or values

regionalDR:
  - name: resilient # Matches with ClusterSet
    globalnetEnabled: false # Support for overlapping CIDR
    clusters: # Pair of clusters, make sure to create each in a different region
      primary:
        name: ocp-primary
        clusterGroup: resilient
        version: 4.18.7
        install_config:
          apiVersion: v1
          baseDomain: "{{ join \".\" (slice (splitList \".\" $.Values.global.clusterDomain) 1) }}"
          metadata:
            name: ocp-primary
          controlPlane:
            name: master
            replicas: 3
            platform:
              aws:
                type: m5.4xlarge
          compute:
            - name: worker
              replicas: 3
              platform:
                aws:
                  type: m5.metal
          networking:
            clusterNetwork:
              - cidr: 10.132.0.0/14
                hostPrefix: 23
            machineNetwork:
              - cidr: 10.1.0.0/16
            networkType: OVNKubernetes
            serviceNetwork:
              - 172.20.0.0/16
          platform:
            aws:
              region: us-west-1
              userTags:
                project: ValidatedPatterns
          publish: External
          sshKey: ""
          pullSecret: ""
      secondary:
        name: ocp-secondary
        clusterGroup: resilient
        version: 4.18.7
        install_config:
          apiVersion: v1
          baseDomain: "{{ join \".\" (slice (splitList \".\" $.Values.global.clusterDomain) 1) }}"
          metadata:
            name: ocp-secondary
          controlPlane:
            name: master
            replicas: 3
            platform:
              aws:
                type: m5.4xlarge
          compute:
            - name: worker
              replicas: 3
              platform:
                aws:
                  type: m5.metal
          networking:
            clusterNetwork:
              - cidr: 10.136.0.0/14
                hostPrefix: 23
            machineNetwork:
              - cidr: 10.2.0.0/16
            networkType: OVNKubernetes
            serviceNetwork:
              - 172.21.0.0/16
          platform:
            aws:
              region: us-east-1
              userTags:
                project: ValidatedPatterns
          publish: External
          sshKey: ""
          pullSecret: ""
    # List of sync policy intervals: RPO should be larger than the sync time.
    # If your sync process takes 3 mins, the interval should be at least 4-5 mins.
    drpolicies:
      - interval: 2m
        vmSupport: true
      - interval: 2m
